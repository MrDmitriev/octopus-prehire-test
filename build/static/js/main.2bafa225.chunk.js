(this.webpackJsonpconverter=this.webpackJsonpconverter||[]).push([[0],{216:function(e,t,r){},370:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r.n(c),a=r(53),s=r.n(a),i=r(123),o=r(11),u=r(76),l=(r(216),r(128)),j=r(181),d=r(50),h=r.n(d),b=r(124),O=r(125),x=r.n(O),v=r(61),y=r.n(v),f="".concat("/octopus-prehire-test","/data/currencies.json"),p=["January","February","March","April","May","June","July","August","September","October","November","December"],m="abcdefghijklmnopqrstuvwxyz",g=y.a.remove,C=function(e){return e.length?e.reduce((function(e,t){return e+t}),0)/e.length:0},w=function(e,t){var r=t.find((function(t){return t.code===e}));return r?r.country:""},N=function(e,t){return e.sort((function(e,r){return e[t].localeCompare(r[t])}))},S=y.a.remove,_=function(){var e=Object(b.a)(h.a.mark((function e(){var t,r,c,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json",Accept:"application/json"}},e.next=4,x.a.get(f,t);case 4:return r=e.sent,c=N(r.data.currencies,"country")||[],n=M(r.data.currencies)||{},e.abrupt("return",{currencies:c,currenciesMap:n});case 10:e.prev=10,e.t0=e.catch(0),console.log("An error occured, #api/getCurrencyList:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(b.a)(h.a.mark((function e(t,r){var c,n,a,s,i,o,u,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,c="".concat("/octopus-prehire-test","/data/").concat(t.toLowerCase(),".json"),n={headers:{"Content-Type":"application/json",Accept:"application/json"}},e.next=7,x.a.get(c,n);case 7:return a=e.sent,s=a.data,i=(void 0===s?{}:s).rates,u=C(o=void 0===i?[]:i),l=w(t,r),e.abrupt("return",{code:t,country:l,rates:o,average:u});case 15:throw e.prev=15,e.t0=e.catch(2),console.log("An error occured, #api/getCurrencyDetail:",e.t0),new Error;case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,r){return e.apply(this,arguments)}}(),M=function(e){for(var t={},r=0;r<m.length;r++){var c=m[r];Object.assign(t,Object(j.a)({},c,[]))}for(var n=0;n<e.length;n++){var a=e[n],s=a.code[0].toLowerCase(),i=S(a.country)[0].toLowerCase();t.hasOwnProperty(s)&&(t[s]=[].concat(Object(l.a)(t[s]),[a])),t.hasOwnProperty(i)&&s!==i&&(t[i]=[].concat(Object(l.a)(t[i]),[a]))}return t},L=r(2),D=function(e){var t=e.children;return Object(L.jsx)("div",{className:"container",children:t})},A=function(){return Object(L.jsx)("header",{className:"header",children:Object(L.jsx)("h1",{className:"header__title",children:"Currency rates"})})},F=function(e){var t=e.children;return Object(L.jsx)("main",{className:"content",children:t})},J=r(17),T=function(e){var t=e.children,r=e.className,c=void 0===r?"":r;return Object(L.jsx)("div",{className:"".concat(c," flex-container"),children:t})},E=function(e){var t=e.children,r=e.className,c=void 0===r?"":r;return Object(L.jsx)("div",{className:"table-container ".concat(c),children:t})},K=function(e){var t=e.currencyDetail,r=t.code,c=void 0===r?"":r,n=t.country,a=void 0===n?"":n,s=t.average,i=void 0===s?0:s;return Object(L.jsx)("tbody",{className:"table__body",children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("td",{children:c}),Object(L.jsx)("td",{style:{minWidth:"19vw"},children:a}),Object(L.jsxs)("td",{children:[i.toFixed(2)," CZK"]})]})})},P=function(){return Object(L.jsx)("thead",{className:"table__header",children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{children:"Code"}),Object(L.jsx)("th",{children:"Country"}),Object(L.jsx)("th",{children:"Average rate"})]})})},Q=r(374),W=r(375),z=r(379),q=r(196),B=r(197),I=r(86),Y=r(199),Z=function(e){var t=function(e){for(var t,r=[],c=new Date,n=c.getMonth(),a=0;a<e.length;a++){var s=p[n%12],i=a===e.length-1?c.getFullYear()%2e3:"",o=s.slice(0,3)+i,u=(t=e[a],Math.round(100*t)/100);r.push({name:o,value:u}),n++}return r}(e.rates);return Object(L.jsx)(Q.a,{width:"100%",height:"75%",children:Object(L.jsxs)(W.a,{width:500,height:250,data:t,margin:{top:55,right:20,left:20,bottom:5},children:[Object(L.jsx)(z.a,{strokeDasharray:"3 3",vertical:!0,horizontal:!1}),Object(L.jsx)(q.a,{dataKey:"name",stroke:"#cfb1c5"}),Object(L.jsx)(B.a,{stroke:"#cfb1c5",domain:["dataMin","dataMax"]}),Object(L.jsx)(I.a,{}),Object(L.jsx)(Y.a,{type:"monotone",dataKey:"value",stroke:"#1e238f",activeDot:{r:8}})]})})},G=function(e){var t=e.currencyDetail,r=e.hidden;return Object(L.jsxs)(E,{className:"currency-detail ".concat(r?"visually-hidden":""),children:[Object(L.jsxs)("table",{className:"currency-detal__table table",children:[Object(L.jsx)(P,{}),Object(L.jsx)(K,{currencyDetail:t})]}),Object(L.jsx)(Z,{rates:t.rates})]})},H=function(e){var t=e.currency,r=e.handleCurrencySelect,c=Object(o.f)();return Object(L.jsxs)("tr",{onClick:function(){r(t.code),c("/currency/detail/".concat(t.code))},children:[Object(L.jsx)("td",{children:t.country}),Object(L.jsx)("td",{children:t.code})]})},R=function(e){var t=e.currencies,r=void 0===t?[]:t,c=e.handleCurrencySelect;return Object(L.jsx)("tbody",{className:"table__body",children:r.map((function(e){return Object(L.jsx)(H,{handleCurrencySelect:c,currency:e},e.code)}))})},U=function(){return Object(L.jsx)("thead",{className:"table__header",children:Object(L.jsxs)("tr",{children:[Object(L.jsx)("th",{children:"Country"},"countryName"),Object(L.jsx)("th",{children:"Code"},"currencyCode")]})})},V=function(e){var t=e.currencies,r=e.handleCurrencySelect,c=N(t,"country");return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(E,{className:"currency-list",children:Object(L.jsxs)("table",{className:"currencies-list__table table",children:[Object(L.jsx)(U,{}),Object(L.jsx)(R,{currencies:c,handleCurrencySelect:r})]})})})},X=function(e){var t=e.handleCurrencySearch,r=Object(c.useState)(""),n=Object(J.a)(r,2),a=n[0],s=n[1];return Object(L.jsx)("div",{className:"currency-search",children:Object(L.jsx)("form",{action:"",children:Object(L.jsx)("label",{htmlFor:"currency-search",children:Object(L.jsx)("input",{value:a,type:"text",name:"currency-search",placeholder:"Search currency",onChange:function(e){var r=e.currentTarget.value,c=void 0===r?"":r;s(c),t(c)}})})})})},$=function(){return Object(L.jsx)("div",{children:"Oops, something went wrong. Try open another currency detail"})},ee=y.a.remove,te=function(e){var t=e.currencies,r=void 0===t?[]:t,n=e.currenciesMap,a=void 0===n?{}:n,s=Object(c.useState)(""),i=Object(J.a)(s,2),o=i[0],u=i[1],l=Object(c.useState)(""),j=Object(J.a)(l,2),d=j[0],h=j[1],b=Object(c.useState)({country:"",code:"",rates:[0],average:0}),O=Object(J.a)(b,2),x=O[0],v=O[1],y=Object(c.useState)(!1),f=Object(J.a)(y,2),p=f[0],m=f[1];Object(c.useEffect)((function(){k(d,r).then((function(e){return e&&v(e)})).catch((function(){return m(!0)}))}),[d,r]);var C=Object(c.useCallback)((function(e){h(e),m(!1)}),[]),w=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";u(ee(e).toLowerCase())}),[]),N=o?function(e,t){return t[e[0]].filter((function(t){var r=g(t.country).toLowerCase(),c=t.code;return r.startsWith(e)||c.toLowerCase().startsWith(e)}))}(o,a):r;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(X,{handleCurrencySearch:w}),Object(L.jsxs)(T,{className:"currencies",children:[Object(L.jsx)(V,{search:o,currencies:N,handleCurrencySelect:C}),p?Object(L.jsx)($,{}):Object(L.jsx)(G,{hidden:!d,currencyDetail:x})]})]})},re=function(){var e=Object(u.useQuery)("currencyList",_),t=e.isLoading,r=e.data;return t?Object(L.jsx)("span",{children:"Loading..."}):Object(L.jsxs)(D,{children:[Object(L.jsx)(A,{}),Object(L.jsx)(F,{children:r&&Object(L.jsx)(te,{currencies:r.currencies,currenciesMap:r.currenciesMap})})]})},ce=new u.QueryClient;s.a.render(Object(L.jsx)(n.a.StrictMode,{children:Object(L.jsx)(u.QueryClientProvider,{client:ce,children:Object(L.jsx)(i.a,{children:Object(L.jsxs)(o.c,{children:[Object(L.jsx)(o.a,{path:"/",element:Object(L.jsx)(re,{})}),Object(L.jsx)(o.a,{path:"/currency/detail/:currency",element:Object(L.jsx)(re,{})})]})})})}),document.getElementById("root"))}},[[370,1,2]]]);
//# sourceMappingURL=main.2bafa225.chunk.js.map